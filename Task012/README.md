# Task012 ‚Äî –û—Å–Ω–æ–≤—ã CMake üîç

## –ß—Ç–æ —Ç–∞–∫–æ–µ CMake?

**`CMake (cross-platform make)`** ‚Äî –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ —Å—Ä–µ–¥—Å—Ç–≤–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞. CMake –Ω–µ –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ —Å–±–æ—Ä–∫–æ–π, –∞ –ª–∏—à—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã —Å–±–æ—Ä–∫–∏ (Makefile, –ø—Ä–æ–µ–∫—Ç—ã –¥–ª—è Visual Studio, Xcode –∏ —Ç.–¥.) –∏–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è CMakeLists.txt.

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è —Å–±–æ—Ä–∫–∏
mkdir build
cd build

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ —Å–±–æ—Ä–∫–∏
cmake ..

# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
cmake --build .

# –û—á–∏—Å—Ç–∫–∞
cmake --build . --target clean
```
## –ü—Ä–æ—Å—Ç–æ–π CMakeLists

```cmake
cmake_minimum_required(VERSION 3.16)
project(main)

set(SOURCE_EXE main.c)
set(SOURCE_LIB lib.c)

add_library(lib STATIC ${SOURCE_LIB})
add_executable(main ${SOURCE_EXE})

target_link_libraries(main lib)
```

| –°—Ç—Ä–æ–∫–∞ | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç|
| :--- | :--- | 
| `cmake_minimum_required(VERSION 3.16)` | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è CMake |
| `project(main)` | –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ |
| `set(SOURCE_EXE main.c)` | –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å –∏—Å—Ö–æ–¥–Ω—ã–º —Ñ–∞–π–ª–æ–º –ø—Ä–æ–≥—Ä–∞–º–º—ã |
| `set(SOURCE_LIB lib.c)` | –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å –∏—Å—Ö–æ–¥–Ω—ã–º —Ñ–∞–π–ª–æ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ |
| `add_library(lib STATIC ${SOURCE_LIB})` | –°–æ–∑–¥–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π) |
| `add_executable(main ${SOURCE_EXE})` | –°–æ–∑–¥–∞–Ω–∏–µ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞ |
| `target_link_libraries(main lib)` | –õ–∏–Ω–∫–æ–≤–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Å –ø—Ä–æ–≥—Ä–∞–º–º–æ–π |

---
## –ó–∞–¥–∞–Ω–∏–µ

* –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `build` –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–µ—ë.

* –í—ã–ø–æ–ª–Ω–∏—Ç–µ `cmake ..` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤ —Å–±–æ—Ä–∫–∏.

* –í—ã–ø–æ–ª–Ω–∏—Ç–µ `cmake --build .` –¥–ª—è —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞.

* –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É.