# Task006 ‚Äî –û—Å–Ω–æ–≤—ã Makefile üîç 

## –ß—Ç–æ —Ç–∞–∫–æ–µ Makefile?
**Makefile** ‚Äî —ç—Ç–æ —Ñ–∞–π–ª —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –¥–ª—è —É—Ç–∏–ª–∏—Ç—ã make, –∫–æ—Ç–æ—Ä–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç —Å–±–æ—Ä–∫—É –ø—Ä–æ–≥—Ä–∞–º–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–º–ø–∏–ª—è—Ü–∏—é –∏—Å—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª). Make –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç, –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã, –∏ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ.

---
## –û—Å–Ω–æ–≤–Ω–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

```makefile
—Ü–µ–ª—å: –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
<TAB>–∫–æ–º–∞–Ω–¥–∞1
<TAB>–∫–æ–º–∞–Ω–¥–∞2
```
**–¶–µ–ª—å (target)** ‚Äî –∑–∞–¥–∞—á–∞, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É).

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å (prerequisite)** ‚Äî —Ñ–∞–π–ª—ã, –æ—Ç –∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–≤–∏—Å–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ü–µ–ª–∏. –ï—Å–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å, —Ü–µ–ª—å –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∑–∞–Ω–æ–≤–æ.

**–ö–æ–º–∞–Ω–¥—ã**  –¥–µ–π—Å—Ç–≤–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ü–µ–ª–∏. –í–∞–∂–Ω–æ: –∫–∞–∂–¥–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–æ–ª–∂–Ω–∞ –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å —Å–∏–º–≤–æ–ª–∞ —Ç–∞–±—É–ª—è—Ü–∏–∏ (TAB), –∞ –Ω–µ —Å –ø—Ä–æ–±–µ–ª–æ–≤!

---
## –ü—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–æ–≥–æ Makefile

```makefile
all: clean
	gcc -c *.c
	gcc *.o -o main

clean:
	rm -f *.o
```

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ:

* –¶–µ–ª—å `all` –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ü–µ–ª–∏ `clean` (—Å–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –æ—á–∏—Å—Ç–∫–∞).

* –ó–∞—Ç–µ–º –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –≤—Å–µ `.c` —Ñ–∞–π–ª—ã –≤ –æ–±—ä–µ–∫—Ç–Ω—ã–µ `.o` —Ñ–∞–π–ª—ã.

* –ò–∑ –æ–±—ä–µ–∫—Ç–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª `main`.

* –¶–µ–ª—å `clean` —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –æ–±—ä–µ–∫—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã.

---

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–±–æ—Ä–∫—É

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–±–æ—Ä–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

```bash
make
```
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —É—Ç–∏–ª–∏—Ç–∞ `make` –∏—â–µ—Ç —Ñ–∞–π–ª —Å –∏–º–µ–Ω–µ–º `Makefile` –∏–ª–∏ `makefile` –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–µ—Ä–≤—É—é —Ü–µ–ª—å (–æ–±—ã—á–Ω–æ `all`).

–ß—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ü–µ–ª—å, —É–∫–∞–∂–∏—Ç–µ –µ—ë –∏–º—è:

```bash
make all #—Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É
make clean # –æ—á–∏—Å—Ç–∏—Ç—å –æ–±—ä–µ–∫—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã
```

---

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è, —á—Ç–æ–±—ã –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –æ–¥–Ω–æ–π —Ü–µ–ª–∏ –ø–µ—Ä–µ–¥ –Ω–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–ª–∞—Å—å –¥—Ä—É–≥–∞—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤ –ø–µ—Ä–µ–¥ –∫–æ–º–ø–∏–ª—è—Ü–∏–µ–π), –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.

–í –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ —Ü–µ–ª—å all –∑–∞–≤–∏—Å–∏—Ç –æ—Ç clean, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏ make all —Å–Ω–∞—á–∞–ª–∞ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –æ—á–∏—Å—Ç–∫–∞.

1. –£–¥–∞–ª—è—é—Ç—Å—è –≤—Å–µ `.o` —Ñ–∞–π–ª—ã (`clean`)

2. –ö–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –≤—Å–µ `.c` —Ñ–∞–π–ª—ã (`gcc -c *.c`)

3. –°–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª (`gcc *.o -o main`)

--- 

## –ó–∞–¥–∞–Ω–∏–µ

* –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É `make` –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ. –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ?
* –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É `make clean`. –ö–∞–∫–∏–µ —Ñ–∞–π–ª—ã –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã?
* –î–æ–±–∞–≤—å—Ç–µ –≤ `Makefile` –Ω–æ–≤—É—é —Ü–µ–ª—å `run`, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É.